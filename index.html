<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notestrator</title>
    <script>
      const { ipcRenderer } = require("electron");
    </script>
  </head>
  <body style="margin: 0">
    <svg style="width: 100vw; height: 100vh;" data-current-color="black" data-current-stroke-width="3"></svg>
  </div>
    <script>
      const drawing = document.currentScript.previousElementSibling;
      let currentLine = null;
      window.addEventListener("mousedown", (event) => {
        drawing.insertAdjacentHTML(
          "beforeend",
          `
            <polyline
              points="${event.x} ${event.y}"
              fill="none"
              stroke="${drawing.dataset.currentColor}"
              stroke-width="${drawing.dataset.currentStrokeWidth}"
            />
          `
        );
        currentLine = drawing.lastElementChild;
      });

      window.addEventListener("mousemove", (event) => {
        if (currentLine === null) return;
        currentLine.setAttribute(
          "points",
          `${currentLine.getAttribute("points")}, ${event.x} ${event.y}`
        );
      });

      window.addEventListener("mouseup", () => {
        currentLine = null;
      });

      ipcRenderer.on("color", (_, color) => {
        drawing.dataset.currentColor = color;
      })

      ipcRenderer.on("strokeWidth", (_, strokeWidth) => {
        drawing.dataset.currentStrokeWidth = strokeWidth;
      })
    </script>
  </body>
</html>
